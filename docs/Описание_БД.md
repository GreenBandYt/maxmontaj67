# Описание структуры базы данных CRM "maxmontaj67"

## Основные таблицы

### 1. Таблица `users` (Пользователи)
- **Описание:** Хранит данные о всех пользователях системы.
- **Поля:**
  - `id` — Уникальный идентификатор пользователя.
  - `name` — Имя пользователя.
  - `email` — Электронная почта (уникальное поле).
  - `password_hash` — Хэш пароля для авторизации.
  - `role` — Идентификатор роли (связь с таблицей `roles`).
  - `created_at` — Дата и время создания записи.

---

### 2. Таблица `roles` (Роли пользователей)
- **Описание:** Хранит роли пользователей в системе.
- **Поля:**
  - `id` — Уникальный идентификатор роли.
  - `name` — Название роли (например, "Администратор", "Диспетчер").

---

### 3. Таблица `orders` (Заказы)
- **Описание:** Хранит информацию о заказах.
- **Поля:**
  - `id` — Уникальный идентификатор заказа.
  - `client_id` — Идентификатор заказчика (связь с таблицей `users`).
  - `description` — Текстовое описание заказа.
  - `status` — Статус заказа (`Ожидает`, `Выполняется`, `Завершён`).
  - `created_at` — Дата создания заказа.
  - `updated_at` — Дата последнего изменения заказа.

---

### 4. Таблица `order_assignments` (Назначения на заказы)
- **Описание:** Хранит информацию о назначениях заказов исполнителям.
- **Поля:**
  - `id` — Уникальный идентификатор назначения.
  - `order_id` — Идентификатор заказа (связь с таблицей `orders`).
  - `executor_id` — Идентификатор исполнителя (связь с таблицей `users`).
  - `assigned_at` — Дата и время назначения.

---

## Связи между таблицами
1. **`users` → `roles`:**
   - Один пользователь имеет одну роль.
   - Поле `users.role` ссылается на `roles.id`.

2. **`orders` → `users` (заказчик):**
   - Один заказ связан с одним заказчиком.
   - Поле `orders.client_id` ссылается на `users.id`.

3. **`order_assignments` → `orders`:**
   - Назначение связано с одним заказом.
   - Поле `order_assignments.order_id` ссылается на `orders.id`.

4. **`order_assignments` → `users` (исполнитель):**
   - Назначение связано с одним исполнителем.
   - Поле `order_assignments.executor_id` ссылается на `users.id`.

---

## Примечания
- Структура позволяет масштабировать систему для добавления новых ролей или дополнительных модулей.
- Поля с датами (`created_at`, `updated_at`, `assigned_at`) автоматически фиксируют время создания и обновления записей.
