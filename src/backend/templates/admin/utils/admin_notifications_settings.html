{% extends "admin/utils/utils_base.html" %}

{% block utils_content %}
<h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h2>

<!-- üî• –ë–ª–æ–∫ —Å —Ç–µ–∫—É—â–∏–º –≤—Ä–µ–º–µ–Ω–µ–º –∏ –¥–Ω—ë–º –Ω–µ–¥–µ–ª–∏ -->
<div class="current-time-block">
    üïí <strong>–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è:</strong> {{ current_time }}
    üìÖ <strong>–î–µ–Ω—å –Ω–µ–¥–µ–ª–∏:</strong> {{ current_day }}
    ‚è≥ <strong>–í—Ä–µ–º—è –æ—Ç—Å–µ—á–∫–∏ (check_time):</strong> {{ check_time }}
    ‚è±Ô∏è <strong>–¢–µ–∫—É—â–∏–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ—Ç–ø—Ä–∞–≤–∫–∏:</strong> {{ adaptive_interval }} –º–∏–Ω—É—Ç
</div>

<!-- üîß –§–æ—Ä–º–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞–π–º–∏–Ω–≥–æ–≤ -->
<form id="notificationSettingsForm" method="POST" action="{{ url_for('admin.utils_notifications') }}">
    <table class="settings-table">
        <tr>
            <th>–ò–Ω—Ç–µ—Ä–≤–∞–ª –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π (–Ω–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã) (–≤ –º–∏–Ω—É—Ç–∞—Ö):</th>
            <td>
                <input type="number" name="repeat_interval" value="{{ settings.repeat_interval }}" min="1" required>
            </td>
        </tr>
        <tr>
            <th>–ò–Ω—Ç–µ—Ä–≤–∞–ª –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–æ–∂–∏–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞) (–≤ –º–∏–Ω—É—Ç–∞—Ö):</th>
            <td>
                <input type="number" name="repeat_notified_interval" value="{{ settings.repeat_notified_interval }}" min="1" required>
            </td>
        </tr>
        <tr>
            <th>–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã (–Ω–∞—á–∞–ª–æ):</th>
            <td>
                <input type="time" name="work_hours_start" value="{{ settings.work_hours_start }}" required>
            </td>
        </tr>
        <tr>
            <th>–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã (–∫–æ–Ω–µ—Ü):</th>
            <td>
                <input type="time" name="work_hours_end" value="{{ settings.work_hours_end }}" required>
            </td>
        </tr>
    </table>
    <div style="text-align: center; margin-top: 15px;">
        <button type="submit" class="button">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
    </div>
</form>

<hr>

<!-- üìã –¢–∞–±–ª–∏—Ü–∞ —Ç–µ–∫—É—â–∏—Ö –∑–∞–∫–∞–∑–æ–≤ –≤ –æ–∂–∏–¥–∞–Ω–∏–∏ -->
<h2>üìã –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–∫–∞–∑—ã –≤ `pending_orders`</h2>
<div class="scrollable-table">
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                <th>–¶–µ–Ω–∞</th>
                <th>–î–µ–¥–ª–∞–π–Ω</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
                <th>–ü–æ—Å–ª–µ–¥–Ω–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (–ú–°–ö)</th> <!-- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ -->
            </tr>
        </thead>
        <tbody>
            {% for order in pending_orders %}
            <tr>
                <td>{{ order.id }}</td>
                <td>{{ order.short_description }}</td>
                <td>{{ order.price }} ‚ÇΩ</td>
                <td>{{ order.deadline_at }}</td>
                <td>{{ order.status }}</td>
                <td>{{ order.last_notified_at }}</td>
            </tr>
            {% else %}
            <tr>
                <td colspan="6" style="text-align: center;">üì≠ –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
