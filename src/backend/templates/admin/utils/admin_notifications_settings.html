{% extends "admin/utils/utils_base.html" %}

{% block utils_content %}
<h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h2>

<!-- –¢–∞–±–ª–∏—Ü–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π –¥–ª—è –≤–µ—Ä—Ö–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö, —Ç—è–Ω–µ—Ç—Å—è –Ω–∞ 100% -->
<table style="margin-bottom: 15px; border: 1px solid #ccc; border-radius: 5px; width: 100%;">
    <tr>
        <td style="padding: 5px; font-weight: bold;">–°–µ–π—á–∞—Å:</td>
        <td style="padding: 5px;">{{ current_time }}</td>

        <td style="padding: 5px; font-weight: bold;">–î–µ–Ω—å:</td>
        <td style="padding: 5px;">{{ current_day }}</td>

        <td style="padding: 5px; font-weight: bold;">–û—Ç—Å–µ—á–∫–∞:</td>
        <td style="padding: 5px;">{{ check_time }}</td>

        <td style="padding: 5px; font-weight: bold;">–ò–Ω—Ç–µ—Ä–≤–∞–ª:</td>
        <td style="padding: 5px;">{{ adaptive_interval }} –º–∏–Ω—É—Ç</td>
    </tr>
</table>

<!-- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ -->
<fieldset style="width: 98%; margin: 0 0 0px 0; border: 1px solid #ccc; border-radius: 5px;">
    <legend style="font-weight: bold; padding: 0 10px;">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</legend>

    <form id="notificationSettingsForm" method="POST" action="{{ url_for('admin.utils_notifications') }}">
        <table style="width: 100%; border-spacing: 0; border-collapse: collapse; table-layout: fixed;">
            <colgroup>
                <!-- ¬´–ù–æ–≤—ã–µ, –º–∏–Ω:¬ª -->
                <col style="width: 120px;" />
                <col style="width: 80px;" />
                <!-- ¬´–ü–æ–≤—Ç–æ—Ä—ã, –º–∏–Ω:¬ª -->
                <col style="width: 120px;" />
                <col style="width: 80px;" />
                <!-- ¬´–ù–∞—á–∞–ª–æ:¬ª -->
                <col style="width: 80px;" />
                <col style="width: 70px;" />
                <!-- ¬´–ö–æ–Ω–µ—Ü:¬ª -->
                <col style="width: 80px;" />
                <col style="width: 70px;" />
                <!-- ¬´–î–µ–¥–ª–∞–π–Ω (–¥–Ω–∏):¬ª -->
                <col style="width: 120px;" />
                <col style="width: 70px;" />
                <!-- –ö–Ω–æ–ø–∫–∞ -->
                <col style="width: auto;" />
            </colgroup>
            <tr>
                <!-- –ù–æ–≤—ã–µ, –º–∏–Ω -->
                <th style="text-align: left; padding: 5px; white-space: nowrap;">–ù–æ–≤—ã–µ, –º–∏–Ω:</th>
                <td style="padding: 5px;">
                    <input type="number" name="repeat_interval"
                           value="{{ settings.repeat_interval }}"
                           min="1" required
                           style="width: 80px;" />
                </td>

                <!-- –ü–æ–≤—Ç–æ—Ä—ã, –º–∏–Ω -->
                <th style="text-align: left; padding: 5px; white-space: nowrap;">–ü–æ–≤—Ç–æ—Ä—ã, –º–∏–Ω:</th>
                <td style="padding: 5px;">
                    <input type="number" name="repeat_notified_interval"
                           value="{{ settings.repeat_notified_interval }}"
                           min="1" required
                           style="width: 80px;" />
                </td>

                <!-- –ù–∞—á–∞–ª–æ -->
                <th style="text-align: left; padding: 5px; white-space: nowrap;">–ù–∞—á–∞–ª–æ:</th>
                <td style="padding: 5px;">
                    <input type="time" name="work_hours_start"
                           value="{{ settings.work_hours_start }}"
                           required
                           style="width: 70px;" />
                </td>

                <!-- –ö–æ–Ω–µ—Ü -->
                <th style="text-align: left; padding: 5px; white-space: nowrap;">–ö–æ–Ω–µ—Ü:</th>
                <td style="padding: 5px;">
                    <input type="time" name="work_hours_end"
                           value="{{ settings.work_hours_end }}"
                           required
                           style="width: 70px;" />
                </td>

                <!-- –î–µ–¥–ª–∞–π–Ω (–¥–Ω–∏) -->
                <th style="text-align: left; padding: 5px; white-space: nowrap;">–î–µ–¥–ª–∞–π–Ω (–¥–Ω–∏):</th>
                <td style="padding: 5px;">
                    <input type="number" name="deadline_warning_days"
                           value="{{ settings.deadline_warning_days }}"
                           min="1"
                           style="width: 70px;" />
                </td>

                <!-- –ö–Ω–æ–ø–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è -->
                <td style="padding: 5px; text-align: left;">
                    <button type="submit" class="button">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </td>
            </tr>
        </table>
    </form>
</fieldset>

<!-- –¢–∞–±–ª–∏—Ü–∞ –∑–∞–∫–∞–∑–æ–≤ -->
<h2>üìã –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–∫–∞–∑—ã –≤ `pending_orders`</h2>
<div class="scrollable-table">
    <table style="width: 100%;">
        <thead>
            <tr>
                <th>ID</th>
                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                <th>–¶–µ–Ω–∞</th>
                <th>–î–µ–¥–ª–∞–π–Ω</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
                <th>–ü–æ—Å–ª–µ–¥–Ω–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (–ú–°–ö)</th>
            </tr>
        </thead>
        <tbody>
            {% for order in pending_orders %}
            <tr>
                <td>{{ order.id }}</td>
                <td>{{ order.short_description }}</td>
                <td>{{ order.price }} ‚ÇΩ</td>
                <td>{{ order.deadline_at }}</td>
                <td>{{ order.status }}</td>
                <td>{{ order.last_notified_at }}</td>
            </tr>
            {% else %}
            <tr>
                <td colspan="6" style="text-align: center;">üì≠ –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
